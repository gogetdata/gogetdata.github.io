
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Contributing a ggd recipe &#8212; ggd  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Setting up with Github" href="github-setup.html" />
<link href="https://fonts.googleapis.com/css?family=Lato|Raleway" rel="stylesheet"> 
<link rel="stylesheet" type="text/css" href="_static/font-awesome-4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="_static/style.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jqc-1.12.3/dt-1.10.12/datatables.min.css"/>
<link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">

<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/jqc-1.12.3/dt-1.10.12/datatables.min.js"></script>

<script type="text/javascript" class="init">
$(document).ready(function() {
    $('#recipestable').DataTable( {
        "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]
    } );
} );
</script>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="contributing-a-ggd-recipe">
<span id="contrib-recipe"></span><h1>Contributing a ggd recipe<a class="headerlink" href="#contributing-a-ggd-recipe" title="Permalink to this headline">¶</a></h1>
<p>The following setps outline how to create, check, and add a ggd data recipe.</p>
<div class="section" id="update-local-forked-repo">
<h2>1. Update local forked repo<a class="headerlink" href="#update-local-forked-repo" title="Permalink to this headline">¶</a></h2>
<p>You will need to update the forked ggd-recipes repo on your local machine before
you add a recipe to it.</p>
<blockquote>
<div><ul class="simple">
<li>Navigate to the forked ggd-recipes repo on your local machine</li>
<li>Once in the directory run the following commands:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout master
$ git pull upstream master
$ git push origin master
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="writing-a-bash-script-to-get-data">
<h2>2. Writing a bash script to get data<a class="headerlink" href="#writing-a-bash-script-to-get-data" title="Permalink to this headline">¶</a></h2>
<p>Here you will need create a bash script that extract and process the data you would
like to add to ggd.</p>
<p>The follwoing will outline steps used to create the hg19-gaps ggd data recipe</p>
<ul>
<li><dl class="first docutils">
<dt>First locate the data you would like to extract.</dt>
<dd><ul class="first simple">
<li>Example: hg19-gaps from the USCS genome browser track:</li>
</ul>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">hgdownload</span><span class="o">.</span><span class="n">cse</span><span class="o">.</span><span class="n">ucsc</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">goldenpath</span><span class="o">/</span><span class="n">hg19</span><span class="o">/</span><span class="n">database</span><span class="o">/</span><span class="n">gap</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><p class="first">Next, identify if you need a genome coordinance file. Many of these are hosted on the ggd-recipes repo.
If the coordinance file is not available you can either add one to the ggd-recipes repo or ask a member of the
ggd team to add one.</p>
</li>
<li><p class="first">Example: hg19 genome build coordinance file:</p>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">gogetdata</span><span class="o">/</span><span class="n">ggd</span><span class="o">-</span><span class="n">recipes</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">genomes</span><span class="o">/</span><span class="n">Homo_sapiens</span><span class="o">/</span><span class="n">hg19</span><span class="o">/</span><span class="n">hg19</span><span class="o">.</span><span class="n">genome</span>
</pre></div>
</div>
<ul>
<li><dl class="first docutils">
<dt>Next, identify what format you want the final files to be in and what processing needs to be done</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>Example:</dt>
<dd><ol class="first last arabic">
<li>need to decompress a gziped file</li>
<li>need to extract the chrom, start, end, size, type, and strand columns</li>
<li>needs to sort the resulting extraction</li>
<li>need to bgzip the new sorted extraction</li>
<li>need to tabix the bgzip sorted file</li>
</ol>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Next, create bash script that contains the steps in order to extract and process the data file:</dt>
<dd><ul class="first last">
<li><p class="first">Example (bash script):</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>genome=https://raw.githubusercontent.com/gogetdata/ggd-recipes/master/genomes/Homo_sapiens/hg19/hg19.genome
wget --quiet -O - http://hgdownload.cse.ucsc.edu/goldenpath/hg19/database/gap.txt.gz \
    | gzip -dc \
    | awk -v OFS=&quot;\t&quot; &#39;BEGIN {print &quot;#chrom\tstart\tend\tsize\ttype\tstrand&quot;} {print $2,$3,$4,$7,$8,&quot;+&quot;}&#39; \
    | gsort /dev/stdin $genome \
    | bgzip -c &gt; gaps.bed.gz

tabix gaps.bed.g
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>You should run the script to make sure it works, and that the processed files are what you expect them to be.</p>
</div>
<div class="section" id="create-a-ggd-recipe-using-the-ggd-cli">
<h2>3. Create a ggd recipe using the ggd cli<a class="headerlink" href="#create-a-ggd-recipe-using-the-ggd-cli" title="Permalink to this headline">¶</a></h2>
<p>The go get data (ggd) command line interface (cli) contains tools to create and test a data recipe</p>
<p>If it has not been installed, install the ggd cli following the steps outline in <a class="reference internal" href="index.html#using-ggd"><span class="std std-ref">Using GGD</span></a></p>
<p>With the ggd cli installed you can now transform your bash script into a ggd recipe</p>
<dl class="docutils">
<dt>Eample:</dt>
<dd><p class="first">Assuming your bash script created in step 2 is called <em>hg19_data_recipe.sh</em>, run the following command to turn
it into a ggd recipe:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ggd from-bash -s Homo_sapiens -g hg19 --author mjc --ggd_version 1 --data_version 27-Apr-2009 --summary &#39;Assembly gaps from USCS&#39; -k gaps -k region gaps hg19_data_recipe.sh
</pre></div>
</div>
</div></blockquote>
<p class="last">The <code class="code docutils literal notranslate"><span class="pre">ggd</span> <span class="pre">from-bash</span></code> tools transforms the bash script you created into a data recipe. Running the above code will create
a data recipe called <em>hg19-gaps</em>, which will be a directory and will contain three files. For more information on the
<code class="code docutils literal notranslate"><span class="pre">ggd</span> <span class="pre">from-bash</span></code> command see <a class="reference internal" href="from-bash.html#ggd-from-bash"><span class="std std-ref">from-bash</span></a>.</p>
</dd>
</dl>
</div>
<div class="section" id="build-install-and-check-the-data-recipe">
<h2>4. Build, install, and check the data recipe<a class="headerlink" href="#build-install-and-check-the-data-recipe" title="Permalink to this headline">¶</a></h2>
<p>Now that you have create a ggd data recipe you need to test it to make sure it not only extracts and processes the data, but
that the recipe was correctly created and provides the necessary instruction for data package creation.</p>
<p>To do this use the <code class="code docutils literal notranslate"><span class="pre">ggd</span> <span class="pre">check-recipe</span></code> command.</p>
<dl class="docutils">
<dt>Example:</dt>
<dd><p class="first">Using the hg19-gaps recipe created in step 3, run the following command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ggd check-recipe hg19-gaps
</pre></div>
</div>
<p>or if you are in a different directory on your machine run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ggd check-recipe &lt;Path_To_hg19-gaps&gt;
</pre></div>
</div>
<p class="last">This command will build, install, and check the validity of the new ggd data recipe.
For more information about <code class="code docutils literal notranslate"><span class="pre">ggd</span> <span class="pre">check-recipe</span></code> see <a class="reference internal" href="check-recipe.html#ggd-check-recipe"><span class="std std-ref">check-recipe</span></a></p>
</dd>
</dl>
</div>
<div class="section" id="submit-the-new-ggd-recipe-to-the-original-ggd-recipes-repo">
<h2>5. Submit the new ggd recipe to the original ggd-recipes repo<a class="headerlink" href="#submit-the-new-ggd-recipe-to-the-original-ggd-recipes-repo" title="Permalink to this headline">¶</a></h2>
<p>Once the ggd recipe you created passes step 4 you are ready to add it to the original ggd-recipes repo.</p>
<p>To do this you will need to create a <strong>pull request</strong></p>
<p>From your local machine, add the new data recipe you created to the forked ggd-recipes repo. You will add it
to the recipes/ directory. If you do not put it in the right directory it will be rejected.
The recipes file convention is as follows:</p>
<blockquote>
<div><ul>
<li><p class="first">All recipes are stored within the <strong>ggd-recipes/recipes</strong> directory</p>
</li>
<li><p class="first">The recipes directory has the following format:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">forked</span> <span class="n">ggd</span><span class="o">-</span><span class="n">recipes</span> <span class="n">repo</span><span class="o">&gt;/</span><span class="n">recipes</span><span class="o">/&lt;</span><span class="n">ggd</span> <span class="n">channel</span><span class="o">&gt;/&lt;</span><span class="n">species</span><span class="o">&gt;/&lt;</span><span class="n">genome</span><span class="o">-</span><span class="n">build</span><span class="o">&gt;/</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">&lt;path</span> <span class="pre">to</span> <span class="pre">forked</span> <span class="pre">ggd-recipes</span> <span class="pre">repo&gt;</span></code> is the path to the forked ggd-recipes repo on your local machine</li>
<li><code class="code docutils literal notranslate"><span class="pre">recipes</span></code> is <strong>recipes</strong> directory</li>
<li><dl class="first docutils">
<dt><code class="code docutils literal notranslate"><span class="pre">&lt;ggd</span> <span class="pre">channel&gt;</span></code> is the ggd channel that recipe should go in. This depends on the type of data you are adding.</dt>
<dd>For the hg19-gaps example the channel would be <strong>genomics</strong>.</dd>
</dl>
</li>
<li><code class="code docutils literal notranslate"><span class="pre">&lt;species&gt;</span></code> is the species that data is for. For the hg19-gaps example this would be <strong>Homo_sapiens</strong></li>
<li><code class="code docutils literal notranslate"><span class="pre">&lt;genome-build&gt;</span></code> is the genome build for the datat. For the hg19-gaps example this would be <strong>hg19</strong></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>For the hg19-gaps recipe above you would use the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mv hg19-gaps /&lt;forked ggd-recipes&gt;/recipes/genomics/Homo_sapiens/hg19/
</pre></div>
</div>
<p>Once the recipe is there you will need to add the recipe to your forked ggd-recipe repo.
Navigate to the forked ggd-recipe directory.
Use the following commands:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>Add the recipe to the git repo:</dt>
<dd><code class="code docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">/recipes/genomics/Homo_sapiens/hg19/hg19-gaps/</span></code></dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Commit the addition to the repo: (A text editor will open up. Add a comment about the new recipe and save it)</dt>
<dd><code class="code docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code></dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Push the commit to your fork repo on github: (You will be asked to fill out your github credentials)</dt>
<dd><code class="code docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">origin</span></code></dd>
</dl>
</li>
<li>Go to the ggd-recipes github page for your username. (<a class="reference external" href="https://github.com">https://github.com</a>/&lt;USERNAME&gt;/ggd-recipes/)</li>
<li>Under the green “Clone or download” button click on <strong>Pull request</strong>.</li>
<li>Where it says <strong>base fork:</strong> make sure it is on <strong>gogetdata/ggd-recipes</strong>. And where it says <strong>base:</strong> make sure it
is on <strong>master</strong>.</li>
<li>Click the green <strong>Create pull request</strong> button.</li>
<li>Add some comments and complete the pull request.</li>
</ul>
</div></blockquote>
<p>You have now create a pull request with your new data recipe. The recipe will go through a continous integration
step where the recipe will be tested.</p>
<p>If it passes, the recipe will be added to the gogetdata/ggd-recipes repo and anyone using the ggd tool will be
able to access it.</p>
<p>If it does not pass, you will be informed by the ggd team, and they will work with you on getting it working.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo/gogetdata_temp.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Available packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="ggd-search.html">ggd search</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">ggd install</a></li>
<li class="toctree-l1"><a class="reference internal" href="uninstall.html">ggd uninstall</a></li>
<li class="toctree-l1"><a class="reference internal" href="list-file.html">ggd list-files</a></li>
<li class="toctree-l1"><a class="reference internal" href="pkg-info.html">ggd pkg-info</a></li>
<li class="toctree-l1"><a class="reference internal" href="show-env.html">ggd show-env</a></li>
<li class="toctree-l1"><a class="reference internal" href="from-bash.html">ggd from-bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="check-recipe.html">ggd check-recipe</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="contribute.html">Contribute</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="github-setup.html">Setting up with Github</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Contributing a ggd recipe</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, The gogetdata team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/contribute-recipe.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>